# при установке Docker создает структуру папок в /var/lib/docker, в которой хранятся файлы контейнеров, образов, вольюмов и т.д.
# каждая строка в Dockerfile - это новый слой в image
# рассмотрим два докер-файла:

FROM ubuntu
RUN apt-get update && apt-get -y install python
RUN pip install flask flask-mysql
COPY . /opt/source-code
ENTRYPOINT FLASK_APP=/opt/source-code/app.py flask run

docker build Dockerfile -t frenzy88/my-custom-app

##########

FROM ubuntu
RUN apt-get update && apt-get -y install python
RUN pip install flask flask-mysql
COPY app2.py /opt/source-code
ENTRYPOINT FLASK_APP=/opt/source-code/app2.py flask run

docker build Dockerfile2 -t frenzy88/my-custom-app-2

# при билде второго образа Docker не будет заново создавать первые три слоя, т.к. они одинаковые для обоих образов (и уже были собраны для первого образа)
# он возьмет данные о первых трех слоях из кеша и начнет пересобирать только последние два слоя
# таким образом Docker собирает образы быстрее и эффективнее сохраняет дисковое пространство
# также это полезно, когда мы меняем source code нашего приложения
